<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>subreddit link maker</title>
		<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
		<!--[if lt IE 9]><script type='text/javascript' src='assets/javascript/html5.js'></script><![endif]-->
		<script type='text/javascript' src='assets/javascript/prettify.js'></script>
		<script type='text/javascript' src='assets/javascript/jquery-1.7.1.min.js'></script>
		
		<script type="text/javascript">
    
    	// SETUP
		
		// default subreddit name
		var su = 'mysubredditname';

		$(document).ready(function(){	
			// set default value of form fields
			$('#rname').val(su);
			$('#bname').text(su);
			
			// call function to set value of text area and bookmarklet link
			makebookmarklet();				
			
			$('#rname').change(function() {
				 makebookmarklet()
			});
						
			// this function will update the bookmarklet based on the value of the form fields
			function makebookmarklet() {			
				
				// Here is the magic code
			
				str = "javascript:(function(){d=document;q=d.getSelection();u=encodeURIComponent(d.location.href);ti=encodeURIComponent(d.title + ' ' + q);window.open('https://www.reddit.com/r/" + $('#rname').val() + "/submit?url='+u+'&title='+ti,'red','width=' + Math.max(900, 0.75 * window.innerWidth)  + ', height=' + window.innerHeight)})()";
				
				// insert into textarea
				$('#marklet').val(str);
				
				$('#bname').text($('#rname').val());
				
				// make it the link for drag action form hyperlink
				$("a#mlink").attr('href', str);
			}

		});
    </script>

		<link rel='stylesheet' type='text/css' href='assets/css/style.css' />
		<link rel='stylesheet' type='text/css' href='assets/css/bootstrap.css' />
		<link rel='stylesheet' type='text/css' href='assets/css/prettify.css' />
		
		<style type='text/css'>
		label, input, textarea {display:block;}
		label {margin:1em, 0, 0; font-weight:900; }
		input, textarea {width: 500px;}
   		</style>

	</head>
	<body onload='prettyPrint()'>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand" href="#">subreddit link maker</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li class="active"><a href="#">Make It</a></li>
            <li><a href="https://github.com/cogdog/subreddit-link-maker">Code</a></li>
            <li><a href="http://cog.dog/">by cogdog</a></li>
          </ul>
        </div><!-- /.nav-collapse -->
      </div>
    </div><!-- /navbar-inner -->
</div>
		
  <div class='row-fluid'>
  		<div class='hero-unit' id="home">
			<header>
				<h1 class=''><img src="//www.redditstatic.com/spreddit13.gif" alt="submit to reddit" border="0" /> subreddit link maker</h1>
				<p>Creates a bookmarklet tool useful for adding a link to specified subreddit- it will populate the subreddit add link form with fields automatically populated from content in the target page. This tool will append and selected text in the page to the title when added to reddit (to provide a bit mroe context)</p>
			</header>

			
			<h2 id="maker">Bookmarklet Generator</h2>
			<p>Build a bookmarklet tool to add a link to any subreddit.</p>
			
		<form>
	  	<label for="isize"></label>
	  		  	
	
	  	<label for="rname"></label>
	  	<span class="label label-important">subreddit name</span>
	  	<input type="text" id="rname" />
	  	
	  	<label for="marklet"></label>
	  	
	  	<span class="label label-important">bookmarklet code</span>
	  	<textarea id="marklet" rows="5"></textarea>
	  	Drag link for <a href="#" id="mlink" class='btn btn-info'>link to <span id="bname"></span></a> to your browser bar or copy code above if you like to make your tools by hand.
	  	</form>


        
	
		</div>	
<footer class="span12">
<div class="alert">
a barking dog production &bull; <a href="http://cog.dog/">cog.dog</a> &bull; <a href="http://cogdogblog.com">cogdogblog.com</a>
</div>
</footer>
			</div>

		
		<a href='https://github.com/cogdog/subreddit-link-maker' class='github-ribbon'><img src='assets/images/github-ribbons/white.png' /></a>
	</div>	
	</body>
</html>
